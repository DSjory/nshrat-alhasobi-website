<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translated Episodes | Archive - Alhasoobi Bulletin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>



<body>
    
    <header id="main-header">
        
        <div class="header-right-section">
            <div class="header-logo-main">
                <img src="شعار نشرة الحاسوبي باللون الازرق.png" alt="شعار نشرة الحاسوبي">
            </div>

            <div class="header-text">
                <h1>نشرة الحاسوبي</h1>
                <p>موعدك الأسبوعي في جديد التقنية</p>
            </div>
        </div>

        <nav class="main-nav">
            <ul>
                <li><a href="index.html">الرئيسية</a></li> 
                <li><a href="episodes_ar.html">جميع النشرات</a></li>
                <li><a href="episodes_en.html" aria-current="page">النشرات المترجمة</a></li> 
                <li><a href="join.html">انضم إلينا</a></li>
                <li><a href="about.html">فريق العمل</a></li>
            </ul>
        </nav>
        
        <div class="header-tools">
      <button id="search-button" class="header-tool-button">
        <i class="fas fa-search"></i>
     </button>

     <div id="search-bar-container" data-table-name="issues">
        <input type="text" id="search-input" placeholder="ابحث بالعنوان أو رقم العدد...">
        
        <button id="close-search-btn" class="header-tool-button">
            <i class="fas fa-times"></i>
        </button>
        
        </div>
    
     <button id="mode-toggle-button" class="header-tool-button">
        <i class="fas fa-moon"></i>
     </button>
     </div>
    </header>


    <div id="search-bar-container" style="display: none; background-color: var(--main-bg-color); padding: 15px; border-bottom: 1px solid var(--border-color);"> 
        <div class="search-controls" style="max-width: 1200px; margin: auto; display: flex; gap: 10px; align-items: center;">
            
            <input type="text" id="search-input" placeholder="ابحث بالعنوان أو رقم العدد أو التصنيف..." 
                style="flex-grow: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px;">
            
            <select id="category-filter" style="padding: 10px; border: 1px solid var(--border-color); border-radius: 5px;">
                <option value="all">جميع التصنيفات</option>
                <option value="هندسة">هندسة</option>
                <option value="برمجة">برمجة</option>
                <option value="بيانات">علم البيانات</option>
            </select>
            
            <button id="search-execute-btn" style="padding: 10px 15px; border: none; border-radius: 5px; background-color: var(--primary-color); color: white; cursor: pointer;">بحث</button>

            <button id="close-search-btn" style="padding: 10px 15px; border: none; border-radius: 5px; background-color: #f44336; color: white; cursor: pointer;">إغلاق</button>
        </div>
    </div>

    <main id="main-content">
        
        <section id="all-episodes-section">
            <div style="padding-top: 130px;"></div> 
            
            <h2 class="section-title">أرشيف النشرات المترجمة</h2>
            <p class="section-description">تصفح جميع الأعداد السابقة التي قمنا بترجمتها.</p>
            
            <div id="episodes-grid" class="episodes-grid all-episodes-grid">
                <!-- سيتم تعبئة النشرات من Supabase -->
            </div>
        </section>

    </main>


        <!-- السكربتات الصحيحة والموحدة -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="search.js"></script>

    <!-- حدد الجدول الصحيح للنشرات المترجمة -->
    <script>
        document.body.dataset.table = "issues_en";
    </script>

    <!-- تفعيل كل شيء + دعم البحث من الـ URL (مثلما طلبنا قبل) -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('q');

        document.addEventListener('DOMContentLoaded', () => {
            // تفعيل الوضع الليلي والبحث
            setupModeToggle();
            setupSearchToggle();

            // إذا جاء من الصفحة الرئيسية بكلمة بحث → نعبي الحقل ونبحث تلقائي
            if (query) {
                const inputs = document.querySelectorAll('#search-input');
                inputs.forEach(input => {
                    if (input) input.value = decodeURIComponent(query);
                });

                // نفتح شريط البحث الكبير تلقائيًا
                const bigBar = document.querySelector('#search-bar-container[style]');
                if (bigBar) bigBar.style.display = 'block';
            }

            // نفعّل البحث (الجدول هنا issues_en بسبب data-table)
            initializeSearch('issues_en');  // يشتغل عادي، بس dataset.table هو الأهم

            // لو في كلمة بحث → نفذ البحث فورًا
            if (query) {
                performSearch('issues_en');
            }
        });
    </script>
</body>


</body>

<footer>
    <div class="footer-bottom">
        &copy; 2025 نشرة الحاسوبي. جميع الحقوق محفوظة.
    </div>
</footer>

</html>
